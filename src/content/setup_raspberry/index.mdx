---
title: Installation Raspberry
date: "2018-05"
description: "How to setup a raspberry environment"
tag: "article"
---
<subtitles />

> Bonjour à toutes, bonjour à toutes

## Configuration initiale du Raspberry

### Clavier Français

`sudo raspi-config` puis aller dans les options de localisation.
Sélectionner "change keyboard layout", puis "Generic 105-key (Intl) PC" → Other → French → French (azerty) →
The default for the keyboard layout → No compose key.

Vous pouvez dans le même menu paramétrer la timezone ainsi que le pays auquelest associé le wifi, c’est à dire France.

<br />

### Activation du ssh

`sudo raspi-config` puis Interfacing option → P2 SSH → Activate.

Redémarrer le raspberry à la fin de la section 1.1 et 1.2 :`sudo reboot now`

<br />

### Activation du wifi

Modification du fichier de configuration wifi,

```bash
sudo nano /etc/wpa_supplicant/wpa_supplicant.conf
```

et copier dans le fichier le contenu suivant :

```bash
network={
    ssid="votre_ssid"
    psk="PSK_CHIFREZENFDLKSNF"
    key_mgmt=WPA-PSK
}
```

Puis redémarrer le service avec la commande `sudo wpa_cli -i wlan0 reconfigure`

## Script de Reconnexion

Un service `network-manager.service`a été créé à l’emplacement `/etc/systemd/system`qui contient
la configuration pour exécuter un script audémarrage. Voici le contenu du script de configuration :

```bash
[Unit]
Description=Reconnecting to wifi if signal lost
After=tlp-init.service
[Service]
Type=oneshot
RemainAfterExit=no
ExecStart=/usr/local/bin/network-manager.sh
[Install]
WantedBy=multi-user.target
```

`network.manage.sh` :

```bash
#!/bin/sh

### BEGIN INIT INFO
# Provides:     skeleton
# Required-Start:    $remote_fs $syslog
# Required-Stop:    $remote_fs $syslog
# Should-Start:     $portmap
# Should-Stop:      $portmap
# X-Start-Before:   nis
# X-Stop-After: nis
# Default-Start:    2 3 4 5
# Default-Stop:     0 1 6
# X-Interactive:    true
# Short-Description: Example initscript
# Description : this file should be used to construct scripts to be
#               placed in /etc/init.d.
### END INIT INFO

while true; do
    if ifconfig wlan0 | grep -q "inet addr:"; then
        sleep 60
    else
        ip link set wlan0 up
        sleep 10
    fi
done
```

A salted duck egg is a Chinese preserved food product made by soaking duck eggs in brine, or packing each egg in damp,
salted charcoal. In Asian supermarkets, these eggs are sometimes sold covered in a thick layer of salted charcoal paste.
The eggs may also be sold with the salted paste removed, wrapped in plastic, and vacuum packed. From the salt curing process,
the salted duck eggs have a briny aroma, a gelatin-like egg white and a firm-textured, round yolk that is bright orange-red in color.

<br />
<br />
<br />
